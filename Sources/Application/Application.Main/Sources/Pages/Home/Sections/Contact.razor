@using Application.Main.Sources.Components.Dialogs

<div id="contact" class="section-contact">
    <MudText Class="mb-5 text-white" Align="Align.Center" Typo="Typo.h4">CONTATO</MudText>
    <MudDivider Class="mb-5" />

    <div class="text-center">
        <MudButton Variant="Variant.Outlined"
                   Color="Color.Primary"
                   Size="Size.Large"
                   StartIcon="@Icons.Material.Filled.Download"
                   OnClick="DownloadCV"
                   Class="me-3">
            Download CV
        </MudButton>

        <MudButton Variant="Variant.Filled"
                   Color="Color.Secondary"
                   Size="Size.Large"
                   StartIcon="@Icons.Material.Filled.ContactPhone"
                   OnClick="OpenContactDialog">
            Contato R√°pido
        </MudButton>

    </div>
</div>

<style>
    .mud-button {
        border-radius: 12px !important;
        transition: transform 0.2s ease, background 0.2s ease;
    }

        .mud-button:hover {
            transform: translateY(-2px);
            filter: brightness(1.1);
        }
</style>

<script>
    function downloadFile(fileUrl, fileName) {
        const link = document.createElement("a");
        link.href = fileUrl;
        link.download = fileName;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
</script>


@code {
    [Inject] IDialogService? dialogService { get; set; }
    [Inject] ISnackbar? snackbar { get; set; }
    [Inject] IJSRuntime? JS { get; set; }
    [Inject] NavigationManager? Navigation { get; set; }

    private async Task CopyEmail()
    {
        await JS.InvokeVoidAsync("navigator.clipboard.writeText", "marcelodaltromarques@gmail.com");
        snackbar?.Add("E-mail copiado para a √°rea de transfer√™ncia üìã", Severity.Success);
    }

    private async Task DownloadCV()
    {
        var pdfPath = $"{Navigation?.BaseUri}docs/curriculo/Curriculo.pdf";
        await JS.InvokeVoidAsync("downloadFile", pdfPath, "Curriculo - Jo√£o Marcelo Daltro Marques.pdf");
        snackbar?.Add("Obrigado por baixar meu curr√≠culo! üòÅ", Severity.Success);
    }

    private async Task OpenContactDialog()
    {
        var parameters = new DialogParameters();
        var options = new DialogOptions { MaxWidth = MaxWidth.Small, FullWidth = true, CloseButton = true, NoHeader = true };
        await dialogService.ShowAsync<DialogContact>("Contato", parameters, options);
    }
}
